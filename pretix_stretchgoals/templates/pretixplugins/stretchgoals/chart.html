{% load i18n %}
{% load staticfiles %}

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">{% trans "Average ticket prices" %}</h3>
    </div>
    <div class="panel-body">
        <div id="{{ label }}_chart" class="chart"></div>
    </div>
</div>

<script type="application/json" id="{{ label }}-data">{{ data|safe }}</script>
<script type="text/javascript">
$(function () {
    $(".chart").css("height", "350px");

    new Morris.Area({
        element: '{{ label }}_chart',
        goals: [JSON.parse($("#{{ label }}-data").html()).target],
        data: JSON.parse($("#{{ label }}-data").html()).data,
        xkey: 'date',
        ykeys: ['price'],
        labels: [gettext('Average ticket price')],
        postUnits: ' â‚¬',

        smooth: false,
        resize: true,
        fillOpacity: 0.3,
        behaveLikeLine: true,
        goalLineColors: ["#33c33c"],
        goalStrokeWidth: 4,
    });
});
</script>
